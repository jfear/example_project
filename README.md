# Organizing Data Science Projects

## Folder Structure

It is important to come up with a folder structure that works for your typical project. This example project has a basic folder structure that should work well in most settings. I describe each section below.

### Project Level Stuff

#### Settings

Project level settings include the `config` folder and the project level `conda` environment.

- Put settings that are used across workflows to the central config folder
  - If you decide to change anything you will have one place to change it.
- The environment should have the minimal tools to run the project. Remember we can have workflow level environments too.

```bash
├── config                    # This is the project level config
│   ├── common.yaml           # Any settings used by multiple workflows
│   ├── other_lists.yaml      # Any kind of a list that you may need in multiple places
│   └── slurm                 # Snakemake+slurm based on https://github.com/Snakemake-Profiles/slurm
│       ├── config.yaml
│       ├── slurm-jobscript.sh
│       ├── slurm-status.py
│       └── slurm-submit.py
├── environment_dev.yaml      # Additional development tools that are not essential
├── environment.yaml          # Conda environment needed to run the project
```

#### Data

Keep data separate from scripts. This will allow for easier backing up. I actually store data on a server that I can access from any computer. Then I use symbolic links into my project folders.

```bash
├── data                                  # This includes data from a machine or website
│   ├── external
│       └── ...
│   └── raw
│       └── 2019-12-12_run047
│           ├── control_rep1.fastq.gz
│           ├── control_rep2.fastq.gz
│           ├── control_rep3.fastq.gz
│           ├── treatment_rep1.fastq.gz
│           ├── treatment_rep2.fastq.gz
│           └── treatment_rep3.fastq.gz
├── output                                # Data generated by your project
│   ├── chrom-evolution-wf
│       └── ...
│   ├── rnaseq-wf
│       └── ...
│   └── te-wf
│       └── ...
├── references                            # Data shared across multiple projects
│   └── ...
```

#### Scripts

At the project level I usually have helper programs that I keep in `bin` (common folder name on linux to store programs). This includes scripts to launch jobs on the cluster or sync data between different locations.

Some projects require some set up before you can do much. In those cases I will make a `Snakefile` for the project. This file will then call scripts in the `scripts` folder. This matches how I organize workflows (see below).

If there are pieces of code that you keep copying and pasting between scripts, you should modularized. I like to put these code chunks in a `src` (i.e. source code) folder. But `lib` (i.e. library) is another common name people use.

```bash
├── bin
│   └── WRAPPER_SLURM         # This is a script for launching on the cluster I use
├── src                       # Modularized code (i.e. R package, python package, SAS macros)
│   ├── ...
├── Snakefile                 # Project level Snakefile to get everything setup, not usually needed
├── scripts                   # Scripts used by the Snakefile
│   ├── ...
```

#### Documentation

A project level `README` file is a good place to describe the overall project. If you publish your code with the paper this is a good place to point people to where things are.

It is always a good idea to include a `LICENSE` file with your project. I always use the `MIT` license which basically says anyone can use my code, but don't blame me if there is something wrong.

The `notebook` folder is where I do my exploration. It basically my lab notebook. I don't worry about the code working 6 months from now. It is a playground.

The `docs` folder is where I put "finalized" analyses. All of these notebooks should work 10 years from now. They may need some TLC before publication. For a lot of projects I don't have much here because most analysis are done as part of a workflow.

```bash
├── README.md
├── LICENSE
├── notebook
│   ├── 2019-12-10_example_plot.ipynb
│   └── 2019-12-12_example.ipynb
├── docs
│   ├── my_amazing_figure_2.ipynb
│   └── really_cool_analysis.Rmd
```

### Workflows

The rest of the folders are different workflows. I always suffix the folder with `-wf` to make them stand out. Notice that each workflow has a corresponding folder in the `output` folder. That way I keep all of the outputs separate, but easy to find.

Each workflow folder has its own `config` folder for storing workflow specific parameters. A `script` folder for storing the scripts used in each step. and a `Snakefile` which runs everything. If a workflow is supposed to be run on a cluster I have a symbolic link to the helper script `WRAPPER_SLURM`. 

```bash
├── references-wf
│   ├── config
│   │   └── config.yaml
│   ├── scripts
│   │   ├── bowtie.sh
│   │   └── hisat2.sh
│   ├── Snakefile
│   └── WRAPPER_SLURM -> ../bin/WRAPPER_SLURM
```
